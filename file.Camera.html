<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: Camera
  
    &mdash; Hornetseye - Ruby-extension for Computer Vision (DEPRECATED, only works with Ruby version up to 2.7.8))
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Camera";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="file_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: Camera</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'><h1 id="capturing-frames-from-a-camera">Capturing frames from a camera</h1>

<h2 id="video-for-linux-version-2-v4l2">Video for Linux Version 2 (V4L2)</h2>

<p><img src="images/v4l2.jpg" alt="V4L2" /></p>

<p><strong>HornetsEye</strong> allows you to capture images using a V4L2-capable device (for example a USB webcam or a frame grabber).</p>

<h3 id="basic-example">Basic example</h3>

<p>The basic example program opens a camera and displays the frames.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hornetseye_v4l2</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hornetseye_xorg</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_include'>include</span> <span class='const'><span class='object_link'><a href="Hornetseye.html" title="Hornetseye (module)">Hornetseye</a></span></span>
<span class='id identifier rubyid_camera'>camera</span> <span class='op'>=</span> <span class='const'>V4L2Input</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='const'>X11Display</span><span class='period'>.</span><span class='id identifier rubyid_show'>show</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_camera'>camera</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span> <span class='rbrace'>}</span>
</code></pre>

<h3 id="selecting-a-video-mode">Selecting a video mode</h3>

<p>This is a more sophisticated example. It opens the first V4L2 camera and then it prompts the user to select one of the video modes offered by the camera. Finally the program displays the frames.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hornetseye_v4l2</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hornetseye_xorg</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_include'>include</span> <span class='const'><span class='object_link'><a href="Hornetseye.html" title="Hornetseye (module)">Hornetseye</a></span></span>
<span class='id identifier rubyid_camera'>camera</span> <span class='op'>=</span> <span class='const'>V4L2Input</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/dev/video0</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_modes'>modes</span><span class='op'>|</span>
  <span class='id identifier rubyid_modes'>modes</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_mode'>mode</span><span class='comma'>,</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_i'>i</span> <span class='op'>+</span> <span class='int'>1</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_mode'>mode</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_mode'>mode</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>x</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_mode'>mode</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_modes'>modes</span><span class='lbracket'>[</span><span class='const'>STDIN</span><span class='period'>.</span><span class='id identifier rubyid_readline'>readline</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>-</span> <span class='int'>1</span><span class='rbracket'>]</span>
<span class='kw'>end</span>
<span class='const'>X11Display</span><span class='period'>.</span><span class='id identifier rubyid_show'>show</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_camera'>camera</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span> <span class='rbrace'>}</span>
</code></pre>

<h2 id="firewire-digital-camera-dc1394">Firewire Digital Camera (DC1394)</h2>

<p><img src="images/dc1394.jpg" alt="DC1394" /></p>

<p><strong>HornetsEye</strong> also supports capture from DC1394-compatible firewire digital cameras.</p>

<h3 id="basic-example-1">Basic Example</h3>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hornetseye_dc1394</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hornetseye_xorg</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_include'>include</span> <span class='const'><span class='object_link'><a href="Hornetseye.html" title="Hornetseye (module)">Hornetseye</a></span></span>
<span class='id identifier rubyid_camera'>camera</span> <span class='op'>=</span> <span class='const'>DC1394Input</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='const'>X11Display</span><span class='period'>.</span><span class='id identifier rubyid_show'>show</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_camera'>camera</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span> <span class='rbrace'>}</span>
</code></pre>

<h3 id="selecting-a-video-mode-1">Selecting a video mode</h3>

<p>In this example the user is prompted to select a video mode offered by the camera.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hornetseye_dc1394</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hornetseye_xorg</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_include'>include</span> <span class='const'><span class='object_link'><a href="Hornetseye.html" title="Hornetseye (module)">Hornetseye</a></span></span>
<span class='id identifier rubyid_camera'>camera</span> <span class='op'>=</span> <span class='const'>DC1394Input</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='int'>0</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_modes'>modes</span><span class='op'>|</span>
  <span class='id identifier rubyid_modes'>modes</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_mode'>mode</span><span class='comma'>,</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_i'>i</span> <span class='op'>+</span> <span class='int'>1</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_mode'>mode</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_mode'>mode</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>x</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_mode'>mode</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_modes'>modes</span><span class='lbracket'>[</span><span class='const'>STDIN</span><span class='period'>.</span><span class='id identifier rubyid_readline'>readline</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>-</span> <span class='int'>1</span><span class='rbracket'>]</span>
<span class='kw'>end</span>
<span class='const'>X11Display</span><span class='period'>.</span><span class='id identifier rubyid_show'>show</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_camera'>camera</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span> <span class='rbrace'>}</span>
</code></pre>

<h2 id="microsoft-kinect-libfreenect">Microsoft Kinect (libfreenect)</h2>

<p><img src="images/kinect.jpg" alt="Microsoft Kinect" /></p>

<p>Using the libfreenect bindings one can capture RGB and 11-bit depth images with a Microsoft Kinect sensor.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hornetseye_kinect</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hornetseye_xorg</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_include'>include</span> <span class='const'><span class='object_link'><a href="Hornetseye.html" title="Hornetseye (module)">Hornetseye</a></span></span>
<span class='id identifier rubyid_input'>input</span> <span class='op'>=</span> <span class='const'>KinectInput</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_input'>input</span><span class='period'>.</span><span class='id identifier rubyid_led'>led</span> <span class='op'>=</span> <span class='const'>KinectInput</span><span class='op'>::</span><span class='const'>LED_RED</span>
<span class='id identifier rubyid_img'>img</span> <span class='op'>=</span> <span class='const'>MultiArray</span><span class='period'>.</span><span class='id identifier rubyid_ubytergb'>ubytergb</span> <span class='int'>1280</span><span class='comma'>,</span> <span class='int'>480</span>
<span class='const'>X11Display</span><span class='period'>.</span><span class='id identifier rubyid_show'>show</span> <span class='symbol'>:output</span> <span class='op'>=&gt;</span> <span class='const'>XVideoOutput</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_img'>img</span><span class='lbracket'>[</span>   <span class='int'>0</span> <span class='op'>...</span>  <span class='int'>640</span><span class='comma'>,</span> <span class='int'>0</span> <span class='op'>...</span> <span class='int'>480</span> <span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_input'>input</span><span class='period'>.</span><span class='id identifier rubyid_read_video'>read_video</span>
  <span class='id identifier rubyid_img'>img</span><span class='lbracket'>[</span> <span class='int'>640</span> <span class='op'>...</span> <span class='int'>1280</span><span class='comma'>,</span> <span class='int'>0</span> <span class='op'>...</span> <span class='int'>480</span> <span class='rbracket'>]</span> <span class='op'>=</span> <span class='lparen'>(</span> <span class='id identifier rubyid_input'>input</span><span class='period'>.</span><span class='id identifier rubyid_read_depth'>read_depth</span> <span class='op'>&gt;&gt;</span> <span class='int'>2</span> <span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_clip'>clip</span>
  <span class='id identifier rubyid_input'>input</span><span class='period'>.</span><span class='id identifier rubyid_tilt'>tilt</span> <span class='op'>=</span> <span class='float'>0.0</span>
  <span class='id identifier rubyid_input'>input</span><span class='period'>.</span><span class='id identifier rubyid_get_state'>get_state</span>
  <span class='id identifier rubyid_moving'>moving</span> <span class='op'>=</span> <span class='id identifier rubyid_input'>input</span><span class='period'>.</span><span class='id identifier rubyid_tilt_status'>tilt_status</span> <span class='op'>==</span> <span class='const'>KinectInput</span><span class='op'>::</span><span class='const'>TILT_STATUS_MOVING</span>
  <span class='id identifier rubyid_input'>input</span><span class='period'>.</span><span class='id identifier rubyid_led'>led</span> <span class='op'>=</span> <span class='id identifier rubyid_moving'>moving</span> <span class='op'>?</span> <span class='const'>KinectInput</span><span class='op'>::</span><span class='const'>LED_RED</span> <span class='op'>:</span> <span class='const'>KinectInput</span><span class='op'>::</span><span class='const'>LED_GREEN</span>
  <span class='id identifier rubyid_img'>img</span>
<span class='kw'>end</span>
</code></pre>

<h2 id="see-also">See Also</h2>

<ul>
  <li>Hornetseye::V4LInput</li>
  <li><span class='object_link'><a href="Hornetseye/V4L2Input.html" title="Hornetseye::V4L2Input (class)">Hornetseye::V4L2Input</a></span></li>
  <li><span class='object_link'><a href="Hornetseye/DC1394Input.html" title="Hornetseye::DC1394Input (class)">Hornetseye::DC1394Input</a></span></li>
</ul>

<h2 id="external-links">External Links</h2>

<ul>
  <li><a href="http://v4l2spec.bytesex.org/">V4L2</a></li>
  <li><a href="http://damien.douxchamps.net/ieee1394/libdc1394/">libdc1394</a></li>
  <li><a href="http://damien.douxchamps.net/ieee1394/cameras/">DC1394 camera list</a></li>
</ul>
</div></div>

      <div id="footer">
  Generated on Mon Jun 30 15:58:32 2025 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.37 (ruby-3.4.1).
</div>

    </div>
  </body>
</html>